{% extends "base.html" %}

{% block title %}Abbot AI Chat{% endblock %}

{% block extra_head %}
<style>
    .chat-container {
        height: calc(100vh - 64px); /* Adjust for navbar height */
    }
</style>
{% endblock %}

{% block content %}
<div class="chat-container bg-gray-100">
    <div class="flex h-full">
    <!-- Conversation List Sidebar -->
    <div class="w-1/4 bg-white border-r border-gray-200 flex flex-col">
        <div class="p-4 border-b border-gray-200">
            <button id="new-chat" class="w-full bg-blue-500 text-white rounded-lg px-4 py-2 hover:bg-blue-600">
                New Chat
            </button>
        </div>
        <div id="conversation-list" class="flex-1 overflow-y-auto">
            <!-- Conversations will be loaded here -->
        </div>
    </div>

    <!-- Chat Window -->
        <div class="flex-1 flex flex-col bg-white">
        <!-- Chat Header -->
            <div class="p-4 border-b border-gray-200">
            <h2 id="chat-title" class="text-xl font-semibold">Select or start a conversation</h2>
        </div>

        <!-- Message Thread -->
            <div id="message-thread" class="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
            <!-- Messages will be loaded here -->
        </div>

        <!-- Input Area -->
            <div class="p-4 border-t border-gray-200">
            <form id="message-form" class="flex space-x-4">
                <textarea 
                    id="message-input"
                    class="flex-1 rounded-lg border border-gray-300 p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Type your message..."
                    rows="3"
                ></textarea>
                <button 
                    type="submit"
                    class="bg-blue-500 text-white rounded-lg px-6 py-2 hover:bg-blue-600 self-end"
                >
                    Send
                </button>
            </form>
            <div class="text-sm text-gray-500 mt-2">
                <span id="char-count">0</span> / 250,000 characters
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Chat interface initializing...');
    // Initialize the chat interface
    loadConversations();
});
</script>
{% endblock %} 